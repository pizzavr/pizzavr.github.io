<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini App Hub</title>
<style>
:root { --bg:#0f0f10; --card:#1b1b1e; --accent:#4a90e2; --text:#e5e5e5; }
*{box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{margin:0;background:var(--bg);color:var(--text);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px;text-align:center;}
h1{margin-bottom:30px;font-size:2rem;letter-spacing:1px;}
.button-container{display:flex;gap:20px;flex-wrap:wrap;justify-content:center;width:100%;}
.app-btn{background:var(--card);color:var(--text);border:2px solid var(--accent);border-radius:15px;padding:15px 25px;font-size:1.1rem;cursor:pointer;transition:all 0.25s ease;min-width:140px;flex:1 1 140px;}
.app-btn:hover{background:var(--accent);color:#fff;transform:scale(1.05);}
footer{margin-top:40px;font-size:0.85rem;color:#999;}
@media(max-width:500px){h1{font-size:1.5rem;}.app-btn{padding:12px 20px;font-size:1rem;}.button-container{gap:15px;}}
</style>
</head>
<body>
<h1>⚙️ My Mini App Hub</h1>
<div id="login-container">
  <button class="app-btn" onclick="loginWithGithub()">Login with GitHub</button>
</div>
<div class="button-container" id="buttons" style="display:none;"></div>
<footer>© 2025 YourName</footer>

<script>
const GITHUB_USER = "YourGitHubUsername";  // for opening apps
const REPO_NAME = "YourRepoName";

function loginWithGithub() {
  const clientId = "YOUR_CLIENT_ID";
  const redirectUri = "https://your-backend.com/auth/github/callback";
  window.location.href = `https://github.com/login/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&scope=read:user`;
}

// Check URL for logged-in user
const urlParams = new URLSearchParams(window.location.search);
const loggedInUser = urlParams.get('user');

if(loggedInUser){
  document.getElementById('login-container').style.display = 'none';
  document.getElementById('buttons').style.display = 'flex';
  loadApps();
}

async function loadApps() {
  const container = document.getElementById('buttons');
  container.textContent = "Loading apps...";
  try {
    const response = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/contents`);
    const items = await response.json();
    if(!Array.isArray(items)){ container.textContent="Failed to load apps."; return; }

    const folders = items.filter(i=>i.type==="dir");
    container.textContent = "";
    let anyApps=false;

    for(const folder of folders){
      const contentsRes = await fetch(folder.url);
      const contents = await contentsRes.json();
      if(contents.some(f=>f.name.toLowerCase()==="index.html")){
        anyApps=true;
        const btn=document.createElement('button');
        btn.className='app-btn';
        btn.textContent=folder.name.replace(/[-_]/g,' ').replace(/\b\w/g,l=>l.toUpperCase());
        btn.onclick=()=>window.open(`https://${GITHUB_USER}.github.io/${REPO_NAME}/${folder.name}/index.html`,'_blank');
        container.appendChild(btn);
      }
    }
    if(!anyApps) container.textContent="No apps found.";
  } catch(err){
    console.error(err);
    container.textContent="Error loading apps.";
  }
}
</script>
</body>
</html>
